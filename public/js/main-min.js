(function(){function b(c,e){var d="";for(;;){if(e&1){d+=c}e>>=1;if(e){c+=c}else{break}}return d}var a=document.getElementById("progress");document.getElementsByTagName("form")[0].addEventListener("submit",function(j){j=j||window.event;var i=j.target||j.srcElement;var g=i.getElementsByTagName("input")[1];j.preventDefault();j.stopPropagation();g.className="dark-shadow loading";var f=false;var d=0;var k=setInterval(function(){var e="";if(d<5){e="Loading crappy scenic photo"}else{if(d<10){e="Over-saturate colors"}else{if(d<15){e="Add lense flare"}else{e="Loading douchey hipster"}}}a.className="active";a.textContent=e+b(".",d%4);d++},100);var h=new XMLHttpRequest();h.onreadystatechange=function(){if(h.readyState==4&&h.status==200){var l=JSON.parse(h.responseText);clearInterval(k);a.className="";var e=document.getElementById("result");if(!e){e=document.createElement("img");e.src=l.imageUri;e.id="result";document.getElementById("content").appendChild(e)}else{e.src=l.imageUri}g.className="dark-shadow";window.history.pushState({},"","/"+l.hash)}};var c="url="+g.value;h.open("POST",i.getAttribute("action"),true);h.setRequestHeader("X-Requested-With","XMLHttpRequest");h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(c)})}());